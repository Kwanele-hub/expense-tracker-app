{"ast":null,"code":"var _jsxFileName = \"/home/tcg/my-workspace/Team-Serengetti/expense-tracker-app/client/src/app/income/Income.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport * as yup from 'yup';\nimport * as dayjs from 'dayjs';\nimport Swal from 'sweetalert2';\nimport { Link } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\nimport { Messages } from 'primereact/messages';\nimport { Card } from 'primereact/card';\nimport { Button } from 'primereact/button';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Calendar } from 'primereact/calendar';\nimport CurrencySidebar from './../common/CurrencySidebar';\nimport axios from './../../Axios';\nimport { incomeApiEndpoints } from './../../API';\nimport { useTracked } from './../../Store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledSwal = Swal.mixin({\n  customClass: {\n    container: 'container-class',\n    popup: 'popup-class',\n    header: 'header-class',\n    title: 'p-card-title',\n    content: 'content-class',\n    closeButton: 'close-button-class',\n    image: 'image-class',\n    input: 'input-class',\n    actions: 'actions-class',\n    confirmButton: 'p-button p-button-raised p-button-danger p-button-text-icon-left',\n    cancelButton: 'p-button p-button-raised p-button-info p-button-text-icon-left',\n    footer: 'footer-class'\n  },\n  buttonsStyling: false\n});\nlet messages;\nconst addIncomeValidationSchema = yup.object().shape({\n  source: yup.string().required('Income source field is required').max(100, 'Income source must be at most 100 characters'),\n  category: yup.object().required('Income category field is required'),\n  notes: yup.string().max(200, 'Income notes must be at most 200 characters'),\n  amount: yup.string().required('Income amount field is required')\n});\n\nconst Income = props => {\n  _s();\n\n  var _errors$income_date, _errors$category, _errors$source, _errors$amount, _errors$notes;\n\n  const [state] = useTracked();\n  const {\n    register,\n    handleSubmit,\n    setValue,\n    errors,\n    setError,\n    reset,\n    control\n  } = useForm({\n    validationSchema: addIncomeValidationSchema\n  });\n  const [datatable, setDatatable] = useState({\n    sortField: 'id',\n    sortOrder: -1,\n    rowsPerPage: 5,\n    currentPage: 1\n  });\n  const [currencyVisible, setCurrencyVisible] = useState(false);\n  const [incomeSummary, setIncomeSummary] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [incomeCategories, setIncomeCategories] = useState([]);\n  const [income, setIncome] = useState({\n    incomes: {},\n    fetching: true\n  });\n  useEffect(() => {\n    requestIncomeSummary();\n    requestIncomeCategory();\n  }, []);\n  useEffect(() => {\n    requestIncome();\n  }, [datatable]);\n\n  const requestIncomeCategory = async () => {\n    await axios.get(incomeApiEndpoints.incomeCategory + '?sort_col=category_name&sort_order=asc', {}).then(response => {\n      // console.log(response.data);\n      if (response.data.data.length > 0) {\n        setIncomeCategories(response.data.data);\n      } else {}\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const requestIncome = async () => {\n    setIncome({ ...income,\n      fetching: true\n    });\n    await axios.get(incomeApiEndpoints.income + '?page=' + datatable.currentPage + '&sort_col=' + datatable.sortField + '&per_page=' + datatable.rowsPerPage + '&sort_order=' + (datatable.sortOrder > 0 ? 'asc' : 'desc'), {}).then(response => {\n      // console.log('success', response.data);\n      if (response.data.data) {\n        setIncome({ ...income,\n          incomes: response.data,\n          fetching: false\n        });\n      } else {\n        setIncome({ ...income,\n          fetching: false\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const requestIncomeSummary = async () => {\n    await axios.get(incomeApiEndpoints.summary, {}).then(response => {\n      // console.log(response.data);\n      setIncomeSummary(response.data.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const deleteIncome = data => {\n    // console.log(data);\n    StyledSwal.fire({\n      title: 'Are you sure?',\n      text: `Confirm to delete income on ${data.spent_on}.`,\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: '<span class=\"pi pi-trash p-button-icon-left\"></span><span class=\"p-button-text\">Delete</span>',\n      cancelButtonText: '<span class=\"pi pi-ban p-button-icon-left\"></span><span class=\"p-button-text\">No</span>',\n      // confirmButtonColor: '#f76452',\n      // cancelButtonColor: '#3085d6',\n      focusConfirm: false,\n      focusCancel: true\n    }).then(result => {\n      if (result.value) {\n        axios.delete(incomeApiEndpoints.income + '/' + data.id, {}).then(response => {\n          // console.log(response.data);\n          if (response.status === 200) {\n            requestIncome();\n            requestIncomeSummary();\n            messages.show({\n              severity: 'success',\n              detail: 'Your income on ' + data.spent_on + ' deleted successfully.',\n              sticky: false,\n              closable: false,\n              life: 5000\n            });\n          }\n        }).catch(error => {\n          console.log('error', error.response);\n\n          if (error.response.status === 401) {\n            messages.clear();\n            messages.show({\n              severity: 'error',\n              detail: 'Something went wrong. Try again.',\n              sticky: true,\n              closable: true,\n              life: 5000\n            });\n          }\n        });\n      }\n    });\n  };\n\n  const submitIncome = data => {\n    data.category_id = data.category.id;\n    data.currency_id = state.currentCurrency.id;\n    data.income_date = dayjs(data.income_date).format('YYYY-MM-DD HH:mm:ss');\n    axios.post(incomeApiEndpoints.income, JSON.stringify(data)).then(response => {\n      // console.log('success');\n      if (response.status === 201) {\n        reset();\n        setSubmitting(false);\n        setValue('income_date', dayjs(response.data.request.income_date).toDate());\n        requestIncome();\n        requestIncomeSummary();\n        messages.show({\n          severity: 'success',\n          detail: 'Your income on ' + response.data.request.spent_on + ' added.',\n          sticky: false,\n          closable: false,\n          life: 5000\n        });\n      }\n    }).catch(error => {\n      console.log('error', error.response);\n\n      if (error.response.status === 401) {\n        messages.clear();\n        messages.show({\n          severity: 'error',\n          detail: 'Something went wrong. Try again.',\n          sticky: true,\n          closable: true,\n          life: 5000\n        });\n      } else if (error.response.status === 422) {\n        let errors = Object.entries(error.response.data).map(([key, value]) => {\n          return {\n            name: key,\n            message: value[0]\n          };\n        });\n        setError(errors);\n      }\n\n      setSubmitting(false);\n    });\n  };\n\n  const renderIncomeSummary = data => {\n    if (data && data.length > 0) {\n      return data.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"color-link text-center\",\n            children: [item.total.toLocaleString(), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"color-title\",\n              children: item.currency_code + '.'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 81\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 11\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 16\n        }, this);\n      });\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: \"No income data found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 14\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      title: \"Income\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CurrencySidebar, {\n      visible: currencyVisible,\n      onHide: e => setCurrencyVisible(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid p-nogutter\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-fluid\",\n          children: /*#__PURE__*/_jsxDEV(Messages, {\n            ref: el => messages = el\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid p-nogutter\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-fluid\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-panel p-component\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-panel-titlebar\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"color-title text-bold\",\n                    children: \"Income This Month\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 269,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-panel-content-wrapper p-panel-content-wrapper-expanded\",\n                  id: \"pr_id_1_content\",\n                  \"aria-labelledby\": \"pr_id_1_label\",\n                  \"aria-hidden\": \"false\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-panel-content\",\n                    children: renderIncomeSummary(incomeSummary.income_month)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-6\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-panel p-component\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-panel-titlebar\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"color-title text-bold\",\n                    children: \"Income Today\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 53\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-panel-content-wrapper p-panel-content-wrapper-expanded\",\n                  id: \"pr_id_1_content\",\n                  \"aria-labelledby\": \"pr_id_1_label\",\n                  \"aria-hidden\": \"false\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"p-panel-content\",\n                    children: renderIncomeSummary(incomeSummary.income_today)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 285,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12 p-md-6\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"rounded-border\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-card-title p-grid p-nogutter p-justify-between\",\n              children: \"Add Income\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-card-subtitle\",\n              children: \"Add your income information below.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit(submitIncome),\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid\",\n              children: [/*#__PURE__*/_jsxDEV(Controller, {\n                name: \"income_date\",\n                defaultValue: new Date(),\n                onChange: ([e]) => {\n                  // console.log(e);\n                  return e.value;\n                },\n                control: control,\n                as: /*#__PURE__*/_jsxDEV(Calendar, {\n                  dateFormat: \"yy-mm-dd\",\n                  showTime: true,\n                  hourFormat: \"12\",\n                  showButtonBar: true,\n                  maxDate: new Date(),\n                  touchUI: window.innerWidth < 768\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 317,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$income_date = errors.income_date) === null || _errors$income_date === void 0 ? void 0 : _errors$income_date.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid\",\n              children: [/*#__PURE__*/_jsxDEV(Controller, {\n                name: \"category\",\n                onChange: ([e]) => {\n                  return e.value;\n                },\n                control: control,\n                as: /*#__PURE__*/_jsxDEV(Dropdown, {\n                  filter: true,\n                  filterPlaceholder: \"Search here\",\n                  showClear: true,\n                  filterInputAutoFocus: false,\n                  options: incomeCategories,\n                  style: {\n                    width: '100%'\n                  },\n                  placeholder: \"Income Category\",\n                  optionLabel: \"category_name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 337,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$category = errors.category) === null || _errors$category === void 0 ? void 0 : _errors$category.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                ref: register,\n                placeholder: \"Income Source\",\n                name: \"source\",\n                className: \"p-inputtext p-component p-filled\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$source = errors.source) === null || _errors$source === void 0 ? void 0 : _errors$source.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 353,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-inputgroup\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.00\",\n                  ref: register,\n                  keyfilter: \"money\",\n                  placeholder: \"Amount\",\n                  name: \"amount\",\n                  className: \"p-inputtext p-component p-filled\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  label: `${state.currencies.length === 0 ? 'loading' : state.currentCurrency.currency_code}`,\n                  type: \"button\",\n                  onClick: e => setCurrencyVisible(true)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 358,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$amount = errors.amount) === null || _errors$amount === void 0 ? void 0 : _errors$amount.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 363,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid\",\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                ref: register,\n                rows: 5,\n                placeholder: \"Income Notes\",\n                name: \"notes\",\n                className: \"p-inputtext p-inputtextarea p-component p-inputtextarea-resizable\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-error\",\n                children: (_errors$notes = errors.notes) === null || _errors$notes === void 0 ? void 0 : _errors$notes.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-fluid\",\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                disabled: submitting,\n                type: \"submit\",\n                label: \"Add Income\",\n                icon: \"pi pi-plus\",\n                className: \"p-button-raised\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-col-12 p-md-6\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"rounded-border\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-card-title p-grid p-nogutter p-justify-between\",\n                children: \"View Incomes\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-card-subtitle\",\n                children: \"Here are few incomes you've added.\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-col-6\",\n              align: \"right\",\n              children: income.fetching ? /*#__PURE__*/_jsxDEV(ProgressSpinner, {\n                style: {\n                  height: '25px',\n                  width: '25px'\n                },\n                strokeWidth: '4'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 36\n              }, this) : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 388,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DataTable, {\n            value: income.incomes.data,\n            sortField: datatable.sortField,\n            sortOrder: datatable.sortOrder,\n            responsive: true,\n            paginator: true,\n            rows: datatable.rowsPerPage,\n            rowsPerPageOptions: [5, 10, 20],\n            totalRecords: income.incomes.total,\n            lazy: true,\n            first: income.incomes.from - 1,\n            onPage: e => {\n              // console.log(e);\n              setDatatable({ ...datatable,\n                currentPage: e.page + 1,\n                rowsPerPage: e.rows\n              });\n            },\n            onSort: e => {\n              // console.log(e);\n              setDatatable({ ...datatable,\n                sortField: e.sortField,\n                sortOrder: e.sortOrder\n              });\n            },\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(Column, {\n              field: \"id\",\n              header: \"Serial\",\n              sortable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"source\",\n              header: \"Source\",\n              sortable: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"amount\",\n              header: \"Amount\",\n              sortable: true,\n              body: (rowData, column) => {\n                return rowData.amount.toLocaleString() + ' ' + rowData.currency_name;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Column, {\n              field: \"income_date\",\n              header: \"Date\",\n              sortable: true,\n              body: (rowData, column) => {\n                return dayjs(rowData.income_date).format('YYYY-MM-DD hh:mm a');\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Column, {\n              body: (rowData, column) => {\n                // console.log(rowData);\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(Link, {\n                    to: `/income/${rowData.id}/edit`,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      label: \"Edit\",\n                      value: rowData.id,\n                      icon: \"pi pi-pencil\",\n                      className: \"p-button-raised p-button-rounded p-button-info\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 436,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 435,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Button, {\n                    label: \"Delete\",\n                    onClick: () => deleteIncome(rowData),\n                    icon: \"pi pi-trash\",\n                    className: \"p-button-raised p-button-rounded p-button-danger\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this);\n              },\n              header: \"Action\",\n              style: {\n                textAlign: 'center',\n                width: '8em'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 249,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Income, \"nFF0q5CbuTKVflX3Yd5+/gBM0c4=\", false, function () {\n  return [useTracked, useForm];\n});\n\n_c = Income;\nexport default _c2 = /*#__PURE__*/React.memo(Income);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Income\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/home/tcg/my-workspace/Team-Serengetti/expense-tracker-app/client/src/app/income/Income.jsx"],"names":["React","useState","useEffect","Helmet","yup","dayjs","Swal","Link","useForm","Controller","Messages","Card","Button","DataTable","Column","ProgressSpinner","Dropdown","Calendar","CurrencySidebar","axios","incomeApiEndpoints","useTracked","StyledSwal","mixin","customClass","container","popup","header","title","content","closeButton","image","input","actions","confirmButton","cancelButton","footer","buttonsStyling","messages","addIncomeValidationSchema","object","shape","source","string","required","max","category","notes","amount","Income","props","state","register","handleSubmit","setValue","errors","setError","reset","control","validationSchema","datatable","setDatatable","sortField","sortOrder","rowsPerPage","currentPage","currencyVisible","setCurrencyVisible","incomeSummary","setIncomeSummary","submitting","setSubmitting","incomeCategories","setIncomeCategories","income","setIncome","incomes","fetching","requestIncomeSummary","requestIncomeCategory","requestIncome","get","incomeCategory","then","response","data","length","catch","error","console","log","summary","deleteIncome","fire","text","spent_on","icon","showCancelButton","confirmButtonText","cancelButtonText","focusConfirm","focusCancel","result","value","delete","id","status","show","severity","detail","sticky","closable","life","clear","submitIncome","category_id","currency_id","currentCurrency","income_date","format","post","JSON","stringify","request","toDate","Object","entries","map","key","name","message","renderIncomeSummary","item","index","total","toLocaleString","currency_code","e","el","income_month","income_today","Date","window","innerWidth","width","currencies","height","from","page","rows","rowData","column","currency_name","textAlign","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport * as yup from 'yup';\nimport * as dayjs from 'dayjs';\nimport Swal from 'sweetalert2';\nimport { Link } from 'react-router-dom';\nimport { useForm, Controller } from 'react-hook-form';\n\nimport { Messages } from 'primereact/messages';\nimport { Card } from 'primereact/card';\nimport { Button } from 'primereact/button';\nimport { DataTable } from 'primereact/datatable';\nimport { Column } from 'primereact/column';\nimport { ProgressSpinner } from 'primereact/progressspinner';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Calendar } from 'primereact/calendar';\n\nimport CurrencySidebar from './../common/CurrencySidebar';\n\nimport axios from './../../Axios';\nimport { incomeApiEndpoints } from './../../API';\nimport { useTracked } from './../../Store';\n\nconst StyledSwal = Swal.mixin({\n  customClass: {\n    container: 'container-class',\n    popup: 'popup-class',\n    header: 'header-class',\n    title: 'p-card-title',\n    content: 'content-class',\n    closeButton: 'close-button-class',\n    image: 'image-class',\n    input: 'input-class',\n    actions: 'actions-class',\n    confirmButton: 'p-button p-button-raised p-button-danger p-button-text-icon-left',\n    cancelButton: 'p-button p-button-raised p-button-info p-button-text-icon-left',\n    footer: 'footer-class'\n  },\n  buttonsStyling: false\n});\n\nlet messages;\n\nconst addIncomeValidationSchema = yup.object().shape({\n  source: yup.string().required('Income source field is required').max(100, 'Income source must be at most 100 characters'),\n  category: yup.object().required('Income category field is required'),\n  notes: yup.string().max(200, 'Income notes must be at most 200 characters'),\n  amount: yup.string().required('Income amount field is required'),\n});\n\nconst Income = (props) => {\n\n  const [state] = useTracked();\n  const { register, handleSubmit, setValue, errors, setError, reset, control } = useForm({\n    validationSchema: addIncomeValidationSchema\n  });\n  const [datatable, setDatatable] = useState({\n    sortField: 'id',\n    sortOrder: -1,\n    rowsPerPage: 5,\n    currentPage: 1\n  });\n  const [currencyVisible, setCurrencyVisible] = useState(false);\n  const [incomeSummary, setIncomeSummary] = useState({});\n  const [submitting, setSubmitting] = useState(false);\n  const [incomeCategories, setIncomeCategories] = useState([]);\n  const [income, setIncome] = useState({ incomes: {}, fetching: true });\n\n  useEffect(() => {\n    requestIncomeSummary();\n    requestIncomeCategory();\n  }, []);\n\n  useEffect(() => {\n    requestIncome();\n  }, [datatable]);\n\n  const requestIncomeCategory = async () => {\n    await axios.get(incomeApiEndpoints.incomeCategory + '?sort_col=category_name&sort_order=asc', {})\n      .then(response => {\n        // console.log(response.data);\n        if (response.data.data.length > 0) {\n          setIncomeCategories(response.data.data);\n        }\n        else {\n\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  const requestIncome = async () => {\n    setIncome({ ...income, fetching: true });\n    await axios.get(incomeApiEndpoints.income + '?page=' + datatable.currentPage + '&sort_col=' + datatable.sortField + '&per_page=' + datatable.rowsPerPage + '&sort_order=' + (datatable.sortOrder > 0 ? 'asc' : 'desc'), {})\n      .then(response => {\n        // console.log('success', response.data);\n        if (response.data.data) {\n          setIncome({\n            ...income,\n            incomes: response.data,\n            fetching: false\n          });\n        }\n        else {\n          setIncome({\n            ...income,\n            fetching: false\n          });\n        }\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  const requestIncomeSummary = async () => {\n    await axios.get(incomeApiEndpoints.summary, {})\n      .then(response => {\n        // console.log(response.data);\n        setIncomeSummary(response.data.data);\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  };\n\n  const deleteIncome = (data) => {\n    // console.log(data);\n    StyledSwal.fire({\n      title: 'Are you sure?',\n      text: `Confirm to delete income on ${data.spent_on}.`,\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: '<span class=\"pi pi-trash p-button-icon-left\"></span><span class=\"p-button-text\">Delete</span>',\n      cancelButtonText: '<span class=\"pi pi-ban p-button-icon-left\"></span><span class=\"p-button-text\">No</span>',\n      // confirmButtonColor: '#f76452',\n      // cancelButtonColor: '#3085d6',\n      focusConfirm: false,\n      focusCancel: true\n    })\n      .then((result) => {\n        if (result.value) {\n          axios.delete(incomeApiEndpoints.income + '/' + data.id, {})\n            .then(response => {\n              // console.log(response.data);\n              if (response.status === 200) {\n\n                requestIncome();\n                requestIncomeSummary();\n\n                messages.show({\n                  severity: 'success',\n                  detail: 'Your income on ' + data.spent_on + ' deleted successfully.',\n                  sticky: false,\n                  closable: false,\n                  life: 5000\n                });\n              }\n\n            })\n            .catch(error => {\n              console.log('error', error.response);\n\n              if (error.response.status === 401) {\n                messages.clear();\n                messages.show({\n                  severity: 'error',\n                  detail: 'Something went wrong. Try again.',\n                  sticky: true,\n                  closable: true,\n                  life: 5000\n                });\n              }\n\n            });\n        }\n      });\n  };\n\n  const submitIncome = (data) => {\n\n    data.category_id = data.category.id;\n    data.currency_id = state.currentCurrency.id;\n    data.income_date = dayjs(data.income_date).format('YYYY-MM-DD HH:mm:ss');\n\n    axios.post(incomeApiEndpoints.income, JSON.stringify(data))\n      .then(response => {\n        // console.log('success');\n        if (response.status === 201) {\n          reset();\n          setSubmitting(false);\n          setValue('income_date', dayjs(response.data.request.income_date).toDate());\n          requestIncome();\n          requestIncomeSummary();\n\n          messages.show({\n            severity: 'success',\n            detail: 'Your income on ' + response.data.request.spent_on + ' added.',\n            sticky: false,\n            closable: false,\n            life: 5000\n          });\n        }\n      })\n      .catch(error => {\n        console.log('error', error.response);\n\n        if (error.response.status === 401) {\n          messages.clear();\n          messages.show({\n            severity: 'error',\n            detail: 'Something went wrong. Try again.',\n            sticky: true,\n            closable: true,\n            life: 5000\n          });\n        }\n        else if (error.response.status === 422) {\n          let errors = Object.entries(error.response.data).map(([key, value]) => {\n            return { name: key, message: value[0] }\n          });\n          setError(errors);\n        }\n\n        setSubmitting(false)\n      })\n  };\n\n  const renderIncomeSummary = (data) => {\n    if (data && data.length > 0) {\n      return data.map((item, index) => {\n        return <div key={index}>\n          <div className=\"color-link text-center\">{item.total.toLocaleString()} <span className=\"color-title\">{item.currency_code + '.'}</span></div>\n          <hr />\n        </div>\n      })\n    }\n    else {\n      return <div>\n        <div className=\"text-center\">No income data found.</div>\n        <hr />\n      </div>\n    }\n  };\n\n  return (\n    <div>\n      <Helmet title=\"Income\" />\n\n      <CurrencySidebar visible={currencyVisible} onHide={(e) => setCurrencyVisible(false)} />\n\n      <div className=\"p-grid p-nogutter\">\n        <div className=\"p-col-12\">\n          <div className=\"p-fluid\">\n            <Messages ref={(el) => messages = el} />\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-grid p-nogutter\">\n        <div className=\"p-col-12\">\n          <div className=\"p-fluid\">\n\n            <div className=\"p-grid\">\n              <div className=\"p-col-6\">\n                <div className=\"p-panel p-component\">\n                  <div className=\"p-panel-titlebar\"><span className=\"color-title text-bold\">Income This Month</span>\n                  </div>\n                  <div className=\"p-panel-content-wrapper p-panel-content-wrapper-expanded\" id=\"pr_id_1_content\"\n                    aria-labelledby=\"pr_id_1_label\" aria-hidden=\"false\">\n                    <div className=\"p-panel-content\">\n                      {renderIncomeSummary(incomeSummary.income_month)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"p-col-6\">\n                <div className=\"p-panel p-component\">\n                  <div className=\"p-panel-titlebar\"><span className=\"color-title text-bold\">Income Today</span></div>\n                  <div className=\"p-panel-content-wrapper p-panel-content-wrapper-expanded\" id=\"pr_id_1_content\"\n                    aria-labelledby=\"pr_id_1_label\" aria-hidden=\"false\">\n                    <div className=\"p-panel-content\">\n                      {renderIncomeSummary(incomeSummary.income_today)}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n          </div>\n        </div>\n      </div>\n\n      <div className=\"p-grid\">\n\n        <div className=\"p-col-12 p-md-6\">\n          <Card className=\"rounded-border\">\n            <div>\n              <div className=\"p-card-title p-grid p-nogutter p-justify-between\">Add Income</div>\n              <div className=\"p-card-subtitle\">Add your income information below.</div>\n            </div>\n            <br />\n            <form onSubmit={handleSubmit(submitIncome)}>\n              <div className=\"p-fluid\">\n                <Controller\n                  name=\"income_date\"\n                  defaultValue={new Date()}\n                  onChange={([e]) => {\n                    // console.log(e);\n                    return e.value;\n                  }}\n                  control={control}\n                  as={\n                    <Calendar\n                      dateFormat=\"yy-mm-dd\"\n                      showTime={true}\n                      hourFormat=\"12\"\n                      showButtonBar={true}\n                      maxDate={new Date()}\n                      touchUI={window.innerWidth < 768}\n                    />\n                  }\n                />\n                <p className=\"text-error\">{errors.income_date?.message}</p>\n              </div>\n              <div className=\"p-fluid\">\n                <Controller\n                  name=\"category\"\n                  onChange={([e]) => {\n                    return e.value\n                  }}\n                  control={control}\n                  as={\n                    <Dropdown\n                      filter={true}\n                      filterPlaceholder=\"Search here\"\n                      showClear={true}\n                      filterInputAutoFocus={false}\n                      options={incomeCategories}\n                      style={{ width: '100%' }}\n                      placeholder=\"Income Category\"\n                      optionLabel=\"category_name\"\n                    />\n                  }\n                />\n                <p className=\"text-error\">{errors.category?.message}</p>\n              </div>\n              <div className=\"p-fluid\">\n                <input type=\"text\" ref={register} placeholder=\"Income Source\" name=\"source\" className=\"p-inputtext p-component p-filled\" />\n                <p className=\"text-error\">{errors.source?.message}</p>\n              </div>\n              <div className=\"p-fluid\">\n                <div className=\"p-inputgroup\">\n                  <input type=\"number\" step=\"0.00\" ref={register} keyfilter=\"money\" placeholder=\"Amount\" name=\"amount\" className=\"p-inputtext p-component p-filled\" />\n                  <Button\n                    label={`${state.currencies.length === 0 ? 'loading' : state.currentCurrency.currency_code}`}\n                    type=\"button\"\n                    onClick={(e) => setCurrencyVisible(true)} />\n                </div>\n                <p className=\"text-error\">{errors.amount?.message}</p>\n              </div>\n              <div className=\"p-fluid\">\n                <textarea ref={register} rows={5} placeholder=\"Income Notes\" name=\"notes\" className=\"p-inputtext p-inputtextarea p-component p-inputtextarea-resizable\" />\n                <p className=\"text-error\">{errors.notes?.message}</p>\n              </div>\n              <div className=\"p-fluid\">\n                <Button disabled={submitting} type=\"submit\" label=\"Add Income\" icon=\"pi pi-plus\"\n                  className=\"p-button-raised\" />\n              </div>\n            </form>\n          </Card>\n        </div>\n\n        <div className=\"p-col-12 p-md-6\">\n          <Card className=\"rounded-border\">\n            <div className='p-grid'>\n              <div className='p-col-6'>\n                <div className=\"p-card-title p-grid p-nogutter p-justify-between\">View Incomes</div>\n                <div className=\"p-card-subtitle\">Here are few incomes you've added.</div>\n              </div>\n              <div className=\"p-col-6\" align=\"right\">\n                {income.fetching ? <ProgressSpinner style={{ height: '25px', width: '25px' }} strokeWidth={'4'} /> : ''}\n              </div>\n            </div>\n            <br />\n            <DataTable\n              value={income.incomes.data}\n              sortField={datatable.sortField}\n              sortOrder={datatable.sortOrder}\n              responsive={true}\n              paginator={true}\n              rows={datatable.rowsPerPage}\n              rowsPerPageOptions={[5, 10, 20]}\n              totalRecords={income.incomes.total}\n              lazy={true}\n              first={income.incomes.from - 1}\n              onPage={(e) => {\n                // console.log(e);\n                setDatatable({\n                  ...datatable,\n                  currentPage: (e.page + 1),\n                  rowsPerPage: e.rows,\n                });\n              }}\n              onSort={e => {\n                // console.log(e);\n                setDatatable({\n                  ...datatable,\n                  sortField: e.sortField,\n                  sortOrder: e.sortOrder,\n                });\n              }}\n              className=\"text-center\"\n            >\n              <Column field=\"id\" header=\"Serial\" sortable={true} />\n              <Column field=\"source\" header=\"Source\" sortable={true} />\n              <Column field=\"amount\" header=\"Amount\" sortable={true}\n                body={(rowData, column) => {\n                  return rowData.amount.toLocaleString() + ' ' + rowData.currency_name\n                }}\n              />\n              <Column field=\"income_date\" header=\"Date\" sortable={true}\n                body={(rowData, column) => {\n                  return dayjs(rowData.income_date).format('YYYY-MM-DD hh:mm a')\n                }}\n              />\n              <Column\n                body={(rowData, column) => {\n                  // console.log(rowData);\n                  return (\n                    <div>\n                      <Link to={`/income/${rowData.id}/edit`}>\n                        <Button label=\"Edit\" value={rowData.id}\n                          icon=\"pi pi-pencil\"\n                          className=\"p-button-raised p-button-rounded p-button-info\" />\n                      </Link>\n                      <Button label=\"Delete\"\n                        onClick={() => deleteIncome(rowData)}\n                        icon=\"pi pi-trash\"\n                        className=\"p-button-raised p-button-rounded p-button-danger\" />\n                    </div>\n                  )\n                }}\n                header=\"Action\"\n                style={{ textAlign: 'center', width: '8em' }}\n              />\n            </DataTable>\n          </Card>\n        </div>\n\n      </div>\n    </div>\n\n  )\n}\n\nexport default React.memo(Income);\n"]},"metadata":{},"sourceType":"module"}